import React, { ReactElement } from 'react';
import {
    Flex,
    FlexItem,
    Hint,
    HintBody,
    HintFooter,
    HintTitle,
    Modal,
    ModalVariant,
} from '@patternfly/react-core';

import { VulnerabilityComment } from '../types';

export type AffectedComponentsModalProps = {
    isOpen: boolean;
    cve: string;
    comments: VulnerabilityComment[];
    onClose: () => void;
};

function VulnerabilityCommentsModal({
    isOpen,
    cve,
    comments,
    onClose,
}: AffectedComponentsModalProps): ReactElement {
    return (
        <Modal variant={ModalVariant.small} title={cve} isOpen={isOpen} onClose={onClose}>
            <Flex direction={{ default: 'columnReverse' }}>
                {comments.map((comment) => {
                    return (
                        <FlexItem spacer={{ default: 'spacerLg' }}>
                            <Hint className="pf-u-p-md">
                                <HintTitle className="pf-u-font-size-sm pf-u-font-weight-bold">
                                    {/* @TODO: Show a more descriptive text other than just the commenter's name */}
                                    {comment.user}
                                </HintTitle>
                                <HintBody className="pf-u-font-size-sm">{comment.message}</HintBody>
                                <HintFooter className="pf-u-font-size-xs">
                                    {comment.createdAt}
                                </HintFooter>
                            </Hint>
                        </FlexItem>
                    );
                })}
            </Flex>
        </Modal>
    );
}

export default VulnerabilityCommentsModal;
